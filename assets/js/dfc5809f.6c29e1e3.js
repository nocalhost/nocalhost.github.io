"use strict";(self.webpackChunknh_docs=self.webpackChunknh_docs||[]).push([[3406],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return h}});var o=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=o.createContext({}),s=function(e){var n=o.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},d=function(e){var n=s(e.components);return o.createElement(c.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},m=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=s(t),h=a,u=m["".concat(c,".").concat(h)]||m[h]||p[h]||i;return t?o.createElement(u,r(r({ref:n},d),{},{components:t})):o.createElement(u,r({ref:n},d))}));function h(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,r=new Array(i);r[0]=m;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var s=2;s<i;s++)r[s]=t[s];return o.createElement.apply(null,r)}return o.createElement.apply(null,t)}m.displayName="MDXCreateElement"},11021:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},metadata:function(){return c},toc:function(){return s},default:function(){return p}});var o=t(22122),a=t(19756),i=(t(67294),t(3905)),r=["components"],l={title:"What is Nocalhost Config?"},c={unversionedId:"config/config-overview-en",id:"config/config-overview-en",isDocsHomePage:!1,title:"What is Nocalhost Config?",description:"Overview / What is Nocalhost Config?",source:"@site/docs/config/config-overview-en.md",sourceDirName:"config",slug:"/config/config-overview-en",permalink:"/docs/config/config-overview-en",editUrl:"https://github.com/nocalhost/nocalhost.github.io/tree/main/docs/config/config-overview-en.md",version:"current",lastUpdatedBy:"Qi Zhang",lastUpdatedAt:1654589270,formattedLastUpdatedAt:"6/7/2022",frontMatter:{title:"What is Nocalhost Config?"},sidebar:"docs",previous:{title:"Overview",permalink:"/docs/config/config-en"},next:{title:"Spec",permalink:"/docs/config/config-spec-en"}},s=[{value:"Nocalhost Configuration",id:"nocalhost-configuration",children:[]},{value:"View and Save Configuration",id:"view-and-save-configuration",children:[{value:"View Configuration",id:"view-configuration",children:[]},{value:"Update Configuration",id:"update-configuration",children:[]}]},{value:"The Structure of Nocalhost Configuration",id:"the-structure-of-nocalhost-configuration",children:[]},{value:"Correctly Configure the Container",id:"correctly-configure-the-container",children:[{value:"First, you have to declare the name of each container in <code>containers.[].name</code> to distinguish each container.",id:"first-you-have-to-declare-the-name-of-each-container-in-containersname-to-distinguish-each-container",children:[]},{value:"How to configure each configuration item?",id:"how-to-configure-each-configuration-item",children:[]}]},{value:"The Features of Development Configuration",id:"the-features-of-development-configuration",children:[{value:"Take Effect",id:"take-effect",children:[]},{value:"Life Cycle",id:"life-cycle",children:[]},{value:"Visibility",id:"visibility",children:[]}]}],d={toc:s};function p(e){var n=e.components,t=(0,a.Z)(e,r);return(0,i.kt)("wrapper",(0,o.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"/docs/config/config-en"},"Overview")," / ",(0,i.kt)("a",{parentName:"p",href:"/docs/config/config-overview-en"},"What is Nocalhost Config?")),(0,i.kt)("br",null),(0,i.kt)("hr",null),(0,i.kt)("p",null,"We will introduce the configuration of Nocalhost, how to modify it and its features, etc. If you don't have a concept of the configuration of Nocalhost, or want to know more about its structure and features, please read this section."),(0,i.kt)("br",null),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"nocalhost-configuration"},"Nocalhost Configuration"),(0,i.kt)("br",null),(0,i.kt)("p",null,"Development configuration is set around ",(0,i.kt)("inlineCode",{parentName:"p"},"DevMode"),", such as which image should be used to enter ",(0,i.kt)("inlineCode",{parentName:"p"},"DevMode"),", whether the persistence is needed in the development container, which files should be synchronized to the development container, how to debug and run the service in the container by one-click, etc. The ",(0,i.kt)("inlineCode",{parentName:"p"},"DevMode")," in Nocalhost will be more easier to use with correct and appropriate development configuration."),(0,i.kt)("br",null),(0,i.kt)("p",null,"Overall, development configuration is to better define the behavior of ",(0,i.kt)("inlineCode",{parentName:"p"},"DevMode")," ."),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Development Configuration and Deployment Configuration")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The configuration of Nocalhost can be divided into two parts: development configuration and deployment configuration."),(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Deployment configuration defines how K8s applications deployed, including dependency control, variable injection, etc.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Development configuration is set around ",(0,i.kt)("inlineCode",{parentName:"p"},"DevMode"),", such as which image should be used in ",(0,i.kt)("inlineCode",{parentName:"p"},"DevMode"),", whether the persistence is needed in the development container, which files should be synchronized to the development container, how to debug and run the service in the container by one-click, etc."))))),(0,i.kt)("br",null),(0,i.kt)("p",null,"   Normally, only ",(0,i.kt)("strong",{parentName:"p"},"Development configuration")," needs to be concerned. ",(0,i.kt)("strong",{parentName:"p"},"In the configuration document, the configuration we mention refers to the development configuration unless noted otherwise. ")),(0,i.kt)("br",null),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"view-and-save-configuration"},"View and Save Configuration"),(0,i.kt)("h3",{id:"view-configuration"},"View Configuration"),(0,i.kt)("p",null,"If you have never configured Nocalhost for any workload, ",(0,i.kt)("strong",{parentName:"p"},"right-click it and select  ",(0,i.kt)("inlineCode",{parentName:"strong"},"Dev Config")),", then you will see the empty configurations as below, which are all commonly used in the ",(0,i.kt)("inlineCode",{parentName:"p"},"DevMode")," of Nocalhost."),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Configuration is not a must")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You can enter ",(0,i.kt)("inlineCode",{parentName:"p"},"DevMode")," without any configuration."))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'name: coredns\nserviceType: deployment\ncontainers:\n  - name: ""\n    dev:\n        gitUrl: ""\n        image: ""\n        shell: ""\n        workDir: /home/nocalhost-dev\n        storageClass: ""\n        resources: null\n        persistentVolumeDirs: []\n        command: null\n        debug: null\n        sync: null\n        env: []\n        portForward: []\n')),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"update-configuration"},"Update Configuration"),(0,i.kt)("p",null,"We can make any changes and use  ",(0,i.kt)("inlineCode",{parentName:"p"},"Comm"),"+",(0,i.kt)("inlineCode",{parentName:"p"},"S"),"  or  ",(0,i.kt)("inlineCode",{parentName:"p"},"Ctrl"),"+",(0,i.kt)("inlineCode",{parentName:"p"},"S")," on the IDE plugin side to save them."),(0,i.kt)("br",null),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"the-structure-of-nocalhost-configuration"},"The Structure of Nocalhost Configuration"),(0,i.kt)("p",null,"The  ",(0,i.kt)("inlineCode",{parentName:"p"},"name")," and  ",(0,i.kt)("inlineCode",{parentName:"p"},"serviceType"),"  at the top level of the configuration indicate that this configuration belongs to the  ",(0,i.kt)("inlineCode",{parentName:"p"},"deployment")," of   ",(0,i.kt)("inlineCode",{parentName:"p"},"coredns")," . The content of the configuration is in ",(0,i.kt)("inlineCode",{parentName:"p"},"containers")," , which is an array and can set different configurations for multiple containers in one workload."),(0,i.kt)("br",null),(0,i.kt)("h2",{id:"correctly-configure-the-container"},"Correctly Configure the Container"),(0,i.kt)("h3",{id:"first-you-have-to-declare-the-name-of-each-container-in-containersname-to-distinguish-each-container"},"First, you have to declare the name of each container in ",(0,i.kt)("inlineCode",{parentName:"h3"},"containers.[].name")," to distinguish each container."),(0,i.kt)("p",null,"For example, if there are two containers in the workload, ",(0,i.kt)("inlineCode",{parentName:"p"},"ContainerA")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"ContainerB")," (note that this is just an example, and the container should be named according to your real workload) , then you need to declare the names as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'name: coredns\nserviceType: deployment\ncontainers:\n\n  - name: "ContainerA"\n    dev:\n        image: "example:latest"\n        ..........\n        \n  - name: "ContainerB"\n    dev:\n        image: "foo:bar"\n        ..........\n')),(0,i.kt)("p",null,"Surely, if you only need to develop ",(0,i.kt)("inlineCode",{parentName:"p"},"ContainerB")," , you can configure it only. As follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'name: coredns\nserviceType: deployment\ncontainers:\n        \n  - name: "ContainerB"\n    dev:\n        image: ""\n        ..........\n')),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"how-to-configure-each-configuration-item"},"How to configure each configuration item?"),(0,i.kt)("p",null,"This part indeed requires a long and detailed explanation, but we first give a simple example here to offer a quick start for Nocalhost configuration. "),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Need an application to operate?")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"If there is no workload to operate, you can use the following command to install a demo application:"),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.10/samples/bookinfo/platform/kube/bookinfo.yaml\n")))),(0,i.kt)("br",null),(0,i.kt)("p",null,"Right-click a workload that has never been configured, such as details-v1. Click ",(0,i.kt)("inlineCode",{parentName:"p"},"DevConfig"),", then you will see an empty template. Let's make some changes, such as adding an additional env to the development container (the development container will inherit the environment variables from the original container):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"name: details-v1\nserviceType: deployment\ncontainers:\n  - name: details\n    dev:\n      env:\n        - name: nocalhost\n          value: example\n")),(0,i.kt)("p",null,"Using ",(0,i.kt)("inlineCode",{parentName:"p"},"Comm"),"+",(0,i.kt)("inlineCode",{parentName:"p"},"S"),"  or  ",(0,i.kt)("inlineCode",{parentName:"p"},"Ctrl"),"+",(0,i.kt)("inlineCode",{parentName:"p"},"S")," to save the changes, and then enter the ",(0,i.kt)("inlineCode",{parentName:"p"},"DevMode"),". Since it is just a demonstration of the configuration process, you can select any local directory here and its content will be synchronized to the development container, and then you can select any development image."),(0,i.kt)("p",null,"Type  ",(0,i.kt)("inlineCode",{parentName:"p"},"env | grep nocalhost ")," in the terminal after initiating the ",(0,i.kt)("inlineCode",{parentName:"p"},"DevMode"),". As you can see, the environment variables have been injected correctly."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},">  env | grep nocalhost\nPWD=/home/nocalhost-dev\nOLDPWD=/home/nocalhost-dev\nnocalhost=example\n")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"More information")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"To learn more about configuration items and corresponding functions, see  ",(0,i.kt)("a",{parentName:"p",href:"/docs/config/config-spec-en"},"What configurations does Nocalhost offer?")))),(0,i.kt)("br",null),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"the-features-of-development-configuration"},"The Features of Development Configuration"),(0,i.kt)("p",null,"In addition, the design of the Nocalhost configuration also brings some features. Knowing these features may help you better use Nocalhost."),(0,i.kt)("h3",{id:"take-effect"},"Take Effect"),(0,i.kt)("p",null,"The development configuration of nocalhost does not take effect immediately. It needs to be saved and then re-enter the ",(0,i.kt)("inlineCode",{parentName:"p"},"DevMode")," to make it work."),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"life-cycle"},"Life Cycle"),(0,i.kt)("p",null,"Nocalhost will create a ",(0,i.kt)("inlineCode",{parentName:"p"},"secret"),' in each namespace as a "mini database", prefixed with ',(0,i.kt)("inlineCode",{parentName:"p"},"dev.nocalhost.application."),". The configuration will be saved in this ",(0,i.kt)("inlineCode",{parentName:"p"},"secret")," ."),(0,i.kt)("p",null,"Data will be remained in this ",(0,i.kt)("inlineCode",{parentName:"p"},"secret")," until it is destroyed."),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"HELM application")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"If it is a HELM application, for example, its ",(0,i.kt)("inlineCode",{parentName:"p"},"Release.Name"),"  is  ",(0,i.kt)("inlineCode",{parentName:"p"},"bookinfo"),", this ",(0,i.kt)("inlineCode",{parentName:"p"},"secret")," will be named ",(0,i.kt)("inlineCode",{parentName:"p"},"dev.nocalhost.application.bookinfo"),". Moreover, the data stored in this ",(0,i.kt)("inlineCode",{parentName:"p"},"secret")," will be destroyed after uninstalling ",(0,i.kt)("inlineCode",{parentName:"p"},"bookinfo")," ."))),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"visibility"},"Visibility"),(0,i.kt)("p",null,"From the storage design, you can find that the configuration of Nocalhost is shared. Specifically, in the same ",(0,i.kt)("inlineCode",{parentName:"p"},"namespace")," of the same cluster, the configuration of one workload is visible on any device and can be modified (with the modification permission of the  ",(0,i.kt)("inlineCode",{parentName:"p"},"secret")," of ",(0,i.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/access-authn-authz/rbac/"},"RBAC")," ). The configuration all devices get is from the same duplicate."))}p.isMDXComponent=!0}}]);