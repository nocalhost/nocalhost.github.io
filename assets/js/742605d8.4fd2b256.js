"use strict";(self.webpackChunknh_docs=self.webpackChunknh_docs||[]).push([[9545],{3905:function(e,t,r){r.d(t,{Zo:function(){return s},kt:function(){return f}});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=n.createContext({}),u=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},s=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),d=u(r),f=o,v=d["".concat(l,".").concat(f)]||d[f]||p[f]||a;return r?n.createElement(v,i(i({ref:t},s),{},{components:r})):n.createElement(v,i({ref:t},s))}));function f(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=d;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:o,i[1]=c;for(var u=2;u<a;u++)i[u]=r[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},13919:function(e,t,r){function n(e){return!0===/^(\w*:|\/\/)/.test(e)}function o(e){return void 0!==e&&!n(e)}r.d(t,{b:function(){return n},Z:function(){return o}})},44996:function(e,t,r){r.d(t,{C:function(){return a},Z:function(){return i}});var n=r(52263),o=r(13919);function a(){var e=(0,n.Z)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,r=void 0===t?"/":t,a=e.url;return{withBaseUrl:function(e,t){return function(e,t,r,n){var a=void 0===n?{}:n,i=a.forcePrependBaseUrl,c=void 0!==i&&i,l=a.absolute,u=void 0!==l&&l;if(!r)return r;if(r.startsWith("#"))return r;if((0,o.b)(r))return r;if(c)return t+r;var s=r.startsWith(t)?r:t+r.replace(/^\//,"");return u?e+s:s}(a,r,e,t)}}}function i(e,t){return void 0===t&&(t={}),(0,a().withBaseUrl)(e,t)}},58215:function(e,t,r){var n=r(67294);t.Z=function(e){var t=e.children,r=e.hidden,o=e.className;return n.createElement("div",{role:"tabpanel",hidden:r,className:o},t)}},41395:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(67294),o=r(80944),a=r(86010),i="tabItem_1uMI",c="tabItemActive_2DSg";var l=37,u=39;var s=function(e){var t=e.lazy,r=e.block,s=e.defaultValue,p=e.values,d=e.groupId,f=e.className,v=(0,o.Z)(),m=v.tabGroupChoices,h=v.setTabGroupChoices,g=(0,n.useState)(s),b=g[0],y=g[1],k=n.Children.toArray(e.children),w=[];if(null!=d){var N=m[d];null!=N&&N!==b&&p.some((function(e){return e.value===N}))&&y(N)}var O=function(e){var t=e.currentTarget,r=w.indexOf(t),n=p[r].value;y(n),null!=d&&(h(d,n),setTimeout((function(){var e,r,n,o,a,i,l,u;(e=t.getBoundingClientRect(),r=e.top,n=e.left,o=e.bottom,a=e.right,i=window,l=i.innerHeight,u=i.innerWidth,r>=0&&a<=u&&o<=l&&n>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(c),setTimeout((function(){return t.classList.remove(c)}),2e3))}),150))},x=function(e){var t,r;switch(e.keyCode){case u:var n=w.indexOf(e.target)+1;r=w[n]||w[0];break;case l:var o=w.indexOf(e.target)-1;r=w[o]||w[w.length-1]}null==(t=r)||t.focus()};return n.createElement("div",{className:"tabs-container"},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":r},f)},p.map((function(e){var t=e.value,r=e.label;return n.createElement("li",{role:"tab",tabIndex:b===t?0:-1,"aria-selected":b===t,className:(0,a.Z)("tabs__item",i,{"tabs__item--active":b===t}),key:t,ref:function(e){return w.push(e)},onKeyDown:x,onFocus:O,onClick:O},r)}))),t?(0,n.cloneElement)(k.filter((function(e){return e.props.value===b}))[0],{className:"margin-vert--md"}):n.createElement("div",{className:"margin-vert--md"},k.map((function(e,t){return(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==b})}))))}},79443:function(e,t,r){var n=(0,r(67294).createContext)(void 0);t.Z=n},80944:function(e,t,r){var n=r(67294),o=r(79443);t.Z=function(){var e=(0,n.useContext)(o.Z);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},35410:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return c},metadata:function(){return l},toc:function(){return u},default:function(){return p}});var n=r(22122),o=r(19756),a=(r(67294),r(3905)),i=(r(41395),r(58215),r(44996),["components"]),c={title:"VPN proxy"},l={unversionedId:"guides/develop-service-vpn",id:"guides/develop-service-vpn",isDocsHomePage:!1,title:"VPN proxy",description:"VPN proxy mode",source:"@site/docs/guides/develop-service-vpn.md",sourceDirName:"guides",slug:"/guides/develop-service-vpn",permalink:"/docs/guides/develop-service-vpn",editUrl:"https://github.com/nocalhost/nocalhost.github.io/tree/main/docs/guides/develop-service-vpn.md",version:"current",lastUpdatedBy:"p_caiwfeng",lastUpdatedAt:1642487728,formattedLastUpdatedAt:"1/18/2022",frontMatter:{title:"VPN proxy"},sidebar:"docs",previous:{title:"CustomResources",permalink:"/docs/guides/develop-service-crd"},next:{title:"Overview",permalink:"/docs/guides/debug/overview"}},u=[{value:"VPN proxy mode",id:"vpn-proxy-mode",children:[]},{value:"Feature",id:"feature",children:[]},{value:"Architecture",id:"architecture",children:[]},{value:"How to use it",id:"how-to-use-it",children:[]}],s={toc:u};function p(e){var t=e.components,c=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,n.Z)({},s,c,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h3",{id:"vpn-proxy-mode"},"VPN proxy mode"),(0,a.kt)("p",null,"Nocalhost already supports the VPN function, If your application can start in a simple way and has less dependence on\nK8s resources, such as PVC, Secret, Cm, etc. then it is very suitable to use the traffic proxy mode to enter the\ndevelopment mode."),(0,a.kt)("p",null,"In this mode, Nocalhost will provide you with the K8s network environment locally, and you can directly access K8s\nservice with K8s DNS (such as directly accessing the K8s service through svc name), pod ip, svc ip, etc."),(0,a.kt)("p",null,"At the same time, Nocalhost will intercept all inbound traffic of the specified service and forward it to the local, you\ncan directly start your business code locally for development and debugging."),(0,a.kt)("h3",{id:"feature"},"Feature"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"use k8s dns to access remote service on local computer."),(0,a.kt)("li",{parentName:"ul"},"intercept all inbound traffic of special service and forward it to local service."),(0,a.kt)("li",{parentName:"ul"},"support multiple protocol, like TCP, UDP, ICMP etc."),(0,a.kt)("li",{parentName:"ul"},"support multiple platform, like Windows, macOS, Linux etc.")),(0,a.kt)("h3",{id:"architecture"},"Architecture"),(0,a.kt)("p",null,"like the picture below, at the same cluster and namespace"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"developer 1 intercept service 3."),(0,a.kt)("li",{parentName:"ul"},"developer 2 intercept service 4."),(0,a.kt)("li",{parentName:"ul"},"service 3 all inbound traffic will forward to developer 1 thought pod trafficManager."),(0,a.kt)("li",{parentName:"ul"},"service 4 all inbound traffic will forward to developer 2 thought pod trafficManager."),(0,a.kt)("li",{parentName:"ul"},"developer 1 can access cluster another service thought pod trafficManager."),(0,a.kt)("li",{parentName:"ul"},"developer 2 can access cluster another service thought pod trafficManager."),(0,a.kt)("li",{parentName:"ul"},"developer 1 and developer 2 can access each other with inner ip (",(0,a.kt)("strong",{parentName:"li"},"magic"),").")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"architecture",src:r(81519).Z})),(0,a.kt)("h3",{id:"how-to-use-it"},"How to use it"),(0,a.kt)("h4",{id:"enter-vpn-proxy-mode"},"Enter VPN proxy mode"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"vscode",src:r(36798).Z})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"on Windows, you will see a prompt with full screen, remember chose yes")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"vscode",src:r(69826).Z})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"on Linux/macOS, you need to input sudo password to allow nhctl to create virtual network device")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"vscode",src:r(35407).Z})),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"jetbrains",src:r(48327).Z})),(0,a.kt)("h4",{id:"demo"},"Demo"),(0,a.kt)("p",null,(0,a.kt)("img",{src:r(27871).Z})))}p.isMDXComponent=!0},86010:function(e,t,r){function n(e){var t,r,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(o&&(o+=" "),o+=r);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function o(){for(var e,t,r=0,o="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(o&&(o+=" "),o+=t);return o}r.d(t,{Z:function(){return o}})},27871:function(e,t,r){t.Z=r.p+"assets/images/vpn-replace-demo-4335fa68057d3858bfabd1a4a0c78912.gif"},36798:function(e,t,r){t.Z=r.p+"assets/images/vpn-replace-start-all-517254ec1c6064e75145c2d6cc4ea10d.png"},35407:function(e,t,r){t.Z=r.p+"assets/images/vpn-replace-sudo-password-jetbrains-c07cc7297702548f4bce84fba59bc067.png"},69826:function(e,t,r){t.Z=r.p+"assets/images/vpn-replace-sudo-password-windows-3a2c03fb21d1e5b2b61523d16e97ca43.png"},48327:function(e,t,r){t.Z=r.p+"assets/images/vpn-replace-sudo-password-d732aa05844c5e0636b622faeb065547.png"},81519:function(e,t,r){t.Z=r.p+"assets/images/vpn-replace-traffic-manager-18becb2a05c9f7de5b2fc8e5e8ec0157.png"}}]);