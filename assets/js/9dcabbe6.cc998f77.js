"use strict";(self.webpackChunknh_docs=self.webpackChunknh_docs||[]).push([[3186],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return h}});var a=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var c=a.createContext({}),s=function(e){var n=a.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},d=function(e){var n=s(e.components);return a.createElement(c.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,c=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=s(t),h=o,u=m["".concat(c,".").concat(h)]||m[h]||p[h]||i;return t?a.createElement(u,r(r({ref:n},d),{},{components:t})):a.createElement(u,r({ref:n},d))}));function h(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,r=new Array(i);r[0]=m;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l.mdxType="string"==typeof e?e:o,r[1]=l;for(var s=2;s<i;s++)r[s]=t[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},13919:function(e,n,t){function a(e){return!0===/^(\w*:|\/\/)/.test(e)}function o(e){return void 0!==e&&!a(e)}t.d(n,{b:function(){return a},Z:function(){return o}})},44996:function(e,n,t){t.d(n,{C:function(){return i},Z:function(){return r}});var a=t(52263),o=t(13919);function i(){var e=(0,a.Z)().siteConfig,n=(e=void 0===e?{}:e).baseUrl,t=void 0===n?"/":n,i=e.url;return{withBaseUrl:function(e,n){return function(e,n,t,a){var i=void 0===a?{}:a,r=i.forcePrependBaseUrl,l=void 0!==r&&r,c=i.absolute,s=void 0!==c&&c;if(!t)return t;if(t.startsWith("#"))return t;if((0,o.b)(t))return t;if(l)return n+t;var d=t.startsWith(n)?t:n+t.replace(/^\//,"");return s?e+d:d}(i,t,e,n)}}}function r(e,n){return void 0===n&&(n={}),(0,i().withBaseUrl)(e,n)}},43292:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return c},contentTitle:function(){return s},metadata:function(){return d},toc:function(){return p},default:function(){return h}});var a=t(74034),o=t(79973),i=(t(67294),t(3905)),r=t(44996),l=["components"],c={title:"Configure"},s=void 0,d={unversionedId:"config/configure-en",id:"config/configure-en",isDocsHomePage:!1,title:"Configure",description:"Overview / Configure",source:"@site/docs/config/configure-en.md",sourceDirName:"config",slug:"/config/configure-en",permalink:"/docs/config/configure-en",editUrl:"https://github.com/nocalhost/nocalhost.github.io/tree/main/docs/config/configure-en.md",tags:[],version:"current",lastUpdatedBy:"anurnomeru",lastUpdatedAt:1635932231,formattedLastUpdatedAt:"11/3/2021",frontMatter:{title:"Configure"},sidebar:"docs",previous:{title:"Develop configuration",permalink:"/docs/config/config-develop"},next:{title:"Deploy Config",permalink:"/docs/config/config-deployment-en"}},p=[{value:"Zero-Configuration",id:"zero-configuration",children:[{value:"Behavior Expectation in Zero-Configuration",id:"behavior-expectation-in-zero-configuration",children:[]}]},{value:"Configuration in source code directory",id:"configuration-in-source-code-directory",children:[{value:"Add the configuration to source code",id:"add-the-configuration-to-source-code",children:[]},{value:"Take effect",id:"take-effect",children:[]},{value:"Q&amp;A",id:"qa",children:[]}]},{value:"Configuration in Configmap",id:"configuration-in-configmap",children:[{value:"Add the configuration into Configmap",id:"add-the-configuration-into-configmap",children:[]},{value:"Notes for Configmap Configuration",id:"notes-for-configmap-configuration",children:[]},{value:"Take effect",id:"take-effect-1",children:[]}]},{value:"Configuration in Annotations",id:"configuration-in-annotations",children:[{value:"Add the configuration in Annotations",id:"add-the-configuration-in-annotations",children:[]},{value:"Notes for Annotations Configuration",id:"notes-for-annotations-configuration",children:[]},{value:"Take effect",id:"take-effect-2",children:[]}]},{value:"Features of local, Configmap and Annotations configuration",id:"features-of-local-configmap-and-annotations-configuration",children:[{value:"Granularity and priority of configuration",id:"granularity-and-priority-of-configuration",children:[]},{value:"Configuration read time",id:"configuration-read-time",children:[]},{value:"DevConfig Features",id:"devconfig-features",children:[]}]}],m={toc:p};function h(e){var n=e.components,t=(0,o.Z)(e,l);return(0,i.kt)("wrapper",(0,a.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"/docs/config/config-en"},"Overview")," / ",(0,i.kt)("a",{parentName:"p",href:"/docs/config/configure-en"},"Configure")),(0,i.kt)("br",null),(0,i.kt)("hr",null),(0,i.kt)("h1",{id:"multiple-ways-to-configure-nocalhost-configuration"},"Multiple ways to configure Nocalhost Configuration"),(0,i.kt)("p",null,"Apart from putting the configuration in ",(0,i.kt)("inlineCode",{parentName:"p"},"DevConfig")," of IDE plugin (right-click), Nocalhost also supports putting it in source code directory, ConfigMap or Annotation. For example, You can putting your configuration into Annotation, Helm chart or rawManifest to avoid repeated configuration through IDE."),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"PRE-REQUIRE")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Please make sure you have already known how to configure Nocahost correctly. If not, please read ",(0,i.kt)("a",{parentName:"p",href:"/docs/config/config-overview-en"},"Nocalhost Overview ")," first."))),(0,i.kt)("br",null),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"zero-configuration"},"Zero-Configuration"),(0,i.kt)("p",null,"Zero-configuration means to enter ",(0,i.kt)("inlineCode",{parentName:"p"},"DevMode")," without any Nocalhost configuration. The only thing needed is to select or type in a development image."),(0,i.kt)("figure",{className:"img-frame"},(0,i.kt)("img",{className:"gif-img",src:(0,r.Z)("/img/config/dev-without-config.gif")}),(0,i.kt)("figcaption",null,"\u2b50\ufe0f \xa0 Start DevMode without any configuration \xa0 \u2b50\ufe0f ")),(0,i.kt)("h3",{id:"behavior-expectation-in-zero-configuration"},"Behavior Expectation in Zero-Configuration"),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Why care about the expectation of behavior?")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"In zero-configuration, you normally do not need to care about what Nocalhost has done. However, if any of the following behaviors does not meet your expectation, you need to configure Nocalhost to customize it."))),(0,i.kt)("br",null),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Use  ",(0,i.kt)("inlineCode",{parentName:"li"},"/home/nocalhost-dev"),"  in the container as the target directory for file synchronization."),(0,i.kt)("li",{parentName:"ul"},"Try to enter the development container by using the following commands in order: zsh, bash, sh."),(0,i.kt)("li",{parentName:"ul"},"Without persistence enabled, the local data generated in the development container will be lost after closing or restarting the container."),(0,i.kt)("li",{parentName:"ul"},"Unable to use one-click running and debugging"),(0,i.kt)("li",{parentName:"ul"},"Synchronize all contents of the selected directory into the container")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"configuration-in-source-code-directory"},"Configuration in source code directory"),(0,i.kt)("p",null,"Nocalhost supports putting the configuration in source code directory, which can be done by experienced developers, so that other team members can share the configuration."),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"add-the-configuration-to-source-code"},"Add the configuration to source code"),(0,i.kt)("p",null,"Check that the configuration works well in the ",(0,i.kt)("inlineCode",{parentName:"p"},"DevConfig")," of a specific workload (right-click). Then copy it as below:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"name: nocalhost-api\nserviceType: deployment\ncontainers:\n  - name: nocalhost-api\n    dev:\n      image: nocalhost-docker.pkg.coding.net/nocalhost/dev-images/golang:zsh\n      env:\n        - name: NOCALHOST_INJECT_DEV_ENV\n          value: WHATEVER\n")),(0,i.kt)("p",null,"Create ",(0,i.kt)("inlineCode",{parentName:"p"},".nocalhost")," directory in the corresponding source code directory, and then create a file named ",(0,i.kt)("inlineCode",{parentName:"p"},"config.yaml"),". Paste and save the content in ",(0,i.kt)("inlineCode",{parentName:"p"},"config.yaml"),"."),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"take-effect"},"Take effect"),(0,i.kt)("p",null,"Right-click this workload again and click ",(0,i.kt)("inlineCode",{parentName:"p"},"DevConfig"),'. You will find that the configuration has been read from the local directory and there is a "Tips" at the top, indicating that this configuration is a in-memory replica of local file.'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"# Tips: This configuration is a in-memory replica of local file: \n# \n# '/Users/anur/GolandProjects/nocalhost/.nocalhost/config.yaml'\n# \n# You should modify your configuration in local file, and the modification will\n# take effect immediately. (Dev modification will take effect the next time you enter the DevMode)\n#\n# In addition, if you want to config multi service in same config.yaml, or use\n# the Server-version of Nocalhost, you can also configure under the definition \n# of the application, such as:\n# https://github.com/nocalhost/bookinfo/blob/main/.nocalhost/config.yaml\n# \n")),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"qa"},"Q&A"),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"When you forget which local directory the workload is associated to")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Right-click this workload and click ",(0,i.kt)("inlineCode",{parentName:"p"},"Open Project")," to open the associated directory or click ",(0,i.kt)("inlineCode",{parentName:"p"},"Associate Local DIR")," to associate a new directory."))),(0,i.kt)("br",null),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Multiple workloads in one source code")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You can configure multiple workloads in one source code. To do this, add a layer to make the configuration items an array, as shown below: "),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"- name: nocalhost-api\n  serviceType: deployment\n  containers:\n    - name: nocalhost-api\n      dev:\n        image: nocalhost-docker.pkg.coding.net/nocalhost/dev-images/golang:zsh\n        env:\n          - name: NOCALHOST_INJECT_DEV_ENV\n            value: WHATEVER\n\n- name: nocalhost-web\n  serviceType: deployment\n  containers:\n    - name: nocalhost-web\n      dev:\n        image: nocalhost-docker.pkg.coding.net/nocalhost/dev-images/golang:zsh\n")))),(0,i.kt)("br",null),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"configuration-in-configmap"},"Configuration in Configmap"),(0,i.kt)("p",null,"Nocalhost supports putting the configuration in Configmap, which helps to customize the association with the environment. For example, you can write some customized configurations in Configmap and apply it througth the deployment script or CD."),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"add-the-configuration-into-configmap"},"Add the configuration into Configmap"),(0,i.kt)("p",null,"Here we display a very general Helm template of Nocalhost configuration. Note that you do not have to use Helm, and this is just an example for better explanation here."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: "dev.nocalhost.config.{{ .Release.Name }}"\n  labels:\n    dep-management: nocalhost\n  annotations:\n    "helm.sh/hook": pre-install\ndata:\n  config: |-\n    {{ .Files.Get .Values.nocalhost.config.path | nindent 4 }}\n')),(0,i.kt)("br",null),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"What is ",(0,i.kt)("inlineCode",{parentName:"h5"},"{{ .Release.Name }}")," ")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You can find that there are two parts in configmap that are introduced as placeholders. The first is ",(0,i.kt)("inlineCode",{parentName:"p"},"{{ .Release.Name }}")," in the fourth line, which is the name of application. If you are using Helm or Nocalhost to install the application, you need to write the corresponding application name in it, otherwise it should be ",(0,i.kt)("inlineCode",{parentName:"p"},"default.application")," all the time."))),(0,i.kt)("br",null),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"What is ",(0,i.kt)("inlineCode",{parentName:"h5"},"{{ .Files.Get .Values.nocalhost.config.path | nindent 4 }}")," ")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"This is indeed the position where Nocalhost config should be written in, with four indents."))),(0,i.kt)("br",null),(0,i.kt)("p",null,"After knowing the above placeholders, we give the real configmap, as shown in the following format:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: "dev.nocalhost.config.default.application"\n  labels:\n    dep-management: nocalhost\n  annotations:\n    "helm.sh/hook": pre-install\ndata:\n  config: |-\n    - name: nocalhost-api\n      serviceType: deployment\n      containers:\n        - name: nocalhost-api\n          dev:\n            image: nocalhost-docker.pkg.coding.net/nocalhost/dev-images/golang:zsh\n            env:\n              - name: NOCALHOST_INJECT_DEV_ENV\n                value: WHATEVER\n\n    - name: nocalhost-web\n      serviceType: deployment\n      containers:\n        - name: nocalhost-web\n          dev:\n            image: nocalhost-docker.pkg.coding.net/nocalhost/dev-images/golang:zsh\n')),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"notes-for-configmap-configuration"},"Notes for Configmap Configuration"),(0,i.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"Notes")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ol",{parentName:"div"},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Naming rules: It must follow the format ",(0,i.kt)("inlineCode",{parentName:"p"},"dev.nocalhost.config.${appName}"),", namely ",(0,i.kt)("inlineCode",{parentName:"p"},'name: "dev.nocalhost.config.{{ .Release.Name }}"'),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Labels: It needs a key-value label, which is fixed as ",(0,i.kt)("inlineCode",{parentName:"p"},"dep-management: nocalhost"),". ")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"config is in ",(0,i.kt)("inlineCode",{parentName:"p"},"data.config")," as a text block and please pay attention to the indent of the configuration. "))))),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"take-effect-1"},"Take effect"),(0,i.kt)("p",null,"After configuring Configmap, right-click this workload again and click ",(0,i.kt)("inlineCode",{parentName:"p"},"DevConfig"),". If you get the following tips as below, indicating that this configuration is a in-memory replica of local file, that means the configuration has taken effect."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"# Tips: This configuration is a in-memory replica of configmap: \n# \n# 'dev.nocalhost.config.default.application'\n# \n# You should modify your configuration in configmap, and the modification will\n# take effect immediately. (Dev modification will take effect the next time you enter the DevMode)\n# \n")),(0,i.kt)("br",null),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"configuration-in-annotations"},"Configuration in Annotations"),(0,i.kt)("p",null,"Nocalhost also supports putting the configuration in annotations, which is for the same consideration as configmap."),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"add-the-configuration-in-annotations"},"Add the configuration in Annotations"),(0,i.kt)("br",null),(0,i.kt)("p",null,"In like manner, we use a Helm template for explanation, which will help to understand which values should be customized and the corresponding format requirements."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nocalhost-api\n  annotations:\n    dev.nocalhost: |-\n      {{ .Files.Get .Values.nocalhost.annotations.path.authors | nindent 6 }}\n")),(0,i.kt)("p",null,"Annotations configuration is very simple. Here you only need to declare an annotation, fix the key to  ",(0,i.kt)("inlineCode",{parentName:"p"},"dev.nocalhost")," and fix the value as a text block with six fixed indents. As shown below:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nocalhost-api\n  annotations:\n    dev.nocalhost: |-\n      name: nocalhost-api\n      serviceType: deployment\n      containers:\n        - name: nocalhost-api\n          dev:\n            image: nocalhost-docker.pkg.coding.net/nocalhost/dev-images/golang:zsh\n            env:\n              - name: NOCALHOST_INJECT_DEV_ENV\n                value: WHATEVER\n")),(0,i.kt)("br",null),(0,i.kt)("p",null,"Since one workload will not have multiple configurations, there is no need to declare it as array (although array is also supported). "),(0,i.kt)("p",null,"Moreover, the configuration has been fixedly bound to the workload (whether it is Deployment, StatefulSet, DaemonSet or others), so there is also no need to declare its name and type. As shown below:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: apps/v1\nkind: Deployment\n  metadata:  \n  name: nocalhost-api\n  annotations:    \n    dev.nocalhost: |-\n      containers:        \n        - name: nocalhost-api          \n          dev:            \n           image: nocalhost-docker.pkg.coding.net/nocalhost/dev-images/golang:zsh            \n           env:              \n             - name: NOCALHOST_INJECT_DEV_ENV                \n               value: WHATEVER\n")),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"notes-for-annotations-configuration"},"Notes for Annotations Configuration"),(0,i.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"Notes")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ol",{parentName:"div"},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"The key must be ",(0,i.kt)("inlineCode",{parentName:"p"},"dev.nocalhost"),", and the value must be a text block of  ",(0,i.kt)("inlineCode",{parentName:"p"},"Nocalhost Config"),". ")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Pay attention to the indent."))))),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"take-effect-2"},"Take effect"),(0,i.kt)("p",null,"After configuring the Annotation, right-click this workload again and click ",(0,i.kt)("inlineCode",{parentName:"p"},"DevConfig"),". The following tips means the configuration has taken effect."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"# Tips: This configuration is a in-memory replica of annotation: \n# \n# annotations:\n#   dev.nocalhost: |\n#     [Your Config]\n# \n# You should modify your configuration in resource's annotation', and the modification will\n# take effect immediately. (Dev modification will take effect the next time you enter the DevMode)\n# \n")),(0,i.kt)("br",null),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"features-of-local-configmap-and-annotations-configuration"},"Features of local, Configmap and Annotations configuration"),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"granularity-and-priority-of-configuration"},"Granularity and priority of configuration"),(0,i.kt)("p",null,"Nocalhost supports hybrid configurations, for example, if there are ten workloads, three of them can be local, three are Configmap, three are Annotations, and the last one is zero-configuration."),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"If a workload is configured with multiple ways, the priority is as follows:")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Local > Annotations > Configmap > in DevConfig "))),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"configuration-read-time"},"Configuration read time"),(0,i.kt)("p",null,"Before using Nocalhost configuration, Nocalhost will check all configuration methods and try to read them. Therefore, the read of the configuration can be considered to be real-time."),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"devconfig-features"},"DevConfig Features"),(0,i.kt)("p",null,"Please read ",(0,i.kt)("a",{parentName:"p",href:"/docs/config/config-overview#%E5%9B%9B%E3%80%81%E5%BC%80%E5%8F%91%E9%85%8D%E7%BD%AE%E7%9A%84%E7%89%B9%E6%80%A7"},"Nocalhost DevConfig Features")))}h.isMDXComponent=!0}}]);